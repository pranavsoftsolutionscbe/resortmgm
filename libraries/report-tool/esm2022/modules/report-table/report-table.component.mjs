import { Component, Input } from "@angular/core";
import { fillColor } from "report-tool/core";
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
// const classNames = ["table-row", "row-group", "row-childgroup"];
export class ReportTableComponent {
    constructor() {
        this.reportMetaData = {};
        this.devidHeight = 0;
        this.columns = [];
        this.reportData = [];
        this.emptyMessage = "";
        this.fillColor = fillColor;
        this.isResponsive = true;
        this.setDevidHeight();
    }
    getColumnWidth(width) {
        return typeof width === "string" ? width : `${width}px`;
    }
    getMetaDataRow(rowData, index, metaColumns) {
        return {
            rowData,
            index,
            metaColumns,
        };
    }
    showMetaDataRow(rowData, index, metaColumns) {
        if (metaColumns) {
            const fields = (metaColumns.fields || []);
            const metaData = fields.reduce((init, current) => {
                if (init.columns) {
                    init = init.columns[rowData[current]] || {};
                }
                else {
                    init = this.reportMetaData[rowData[current]] || {};
                }
                return init;
            }, {});
            return metaData.index === index;
        }
        return false;
    }
    showMetaDataSubTotalRow(rowData, index, metaColumns) {
        if (metaColumns) {
            const fields = (metaColumns.fields || []);
            const metaData = fields.reduce((init, current, i) => {
                if (init.columns) {
                    init = init.columns[rowData[current]] || {};
                }
                else {
                    init = this.reportMetaData[rowData[current]] || {};
                }
                return init;
            }, {});
            return (metaData.subTotal || {}).index === index;
        }
        return false;
    }
    showMetaDataSubTotalCol(column, metaColumns) {
        const subFields = metaColumns ? metaColumns.subTotal || [] : [];
        return subFields.includes(column);
    }
    getMetadataSubTotal(rowData, column, metaColumns) {
        if (this.showMetaDataSubTotalCol(column, metaColumns)) {
            const fields = (metaColumns.fields || []);
            const metaData = fields.reduce((init, current, i) => {
                if (init.columns) {
                    init = init.columns[rowData[current]] || {};
                }
                else {
                    init = this.reportMetaData[rowData[current]] || {};
                }
                return init;
            }, {});
            return (metaData.subTotal || {})[column] || 0;
        }
        return 0;
    }
    getTextColor(rowData, textColors) {
        if (textColors) {
            const data = textColors.colors.find((f) => f.FieldID === rowData[textColors.field]);
            return data ? data.FieldDesc : "";
        }
        return "";
    }
    setDevidHeight(count = 0) {
        const elem = document.getElementById("exportTable");
        if (elem && this.devidHeight) {
            this.devidHeight = elem.offsetTop;
        }
        else if (count < 10) {
            setTimeout(() => {
                this.setDevidHeight(count + 1);
            }, 1000);
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.1", ngImport: i0, type: ReportTableComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.1", type: ReportTableComponent, selector: "lib-report-table", inputs: { reportMetaData: "reportMetaData", devidHeight: "devidHeight", columns: "columns", reportData: "reportData", reportMetaDataColumns: "reportMetaDataColumns", emptyMessage: "emptyMessage", fillColor: "fillColor", isResponsive: "isResponsive" }, ngImport: i0, template: "<div\r\n  class=\"{{ isResponsive ? 'table-responsive-sm table-responsive' : '' }}\"\r\n  style=\"width: 100%; overflow: auto\"\r\n  style.maxHeight=\"calc(100vh - {{ devidHeight + 8 }}px)\"\r\n>\r\n  <table\r\n    class=\"table table-bordered text-nowrap\"\r\n    id=\"exportTable\"\r\n    style=\"width: max-content\"\r\n  >\r\n    <thead>\r\n      <tr>\r\n        <th\r\n          *ngFor=\"let col of columns\"\r\n          [style.width]=\"getColumnWidth(col.width)\"\r\n          class=\"position-sticky\"\r\n        >\r\n          <b>{{ col.header }}</b>\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <ng-container *ngFor=\"let rowData of reportData; let index = index\">\r\n        <ng-container\r\n          [ngTemplateOutlet]=\"rowGroup\"\r\n          [ngTemplateOutletContext]=\"\r\n            getMetaDataRow(rowData, index, reportMetaDataColumns)\r\n          \"\r\n        ></ng-container>\r\n        <ng-container\r\n          [ngTemplateOutlet]=\"tableRow\"\r\n          [ngTemplateOutletContext]=\"\r\n            getMetaDataRow(rowData, index, reportMetaDataColumns)\r\n          \"\r\n        ></ng-container>\r\n        <ng-container\r\n          [ngTemplateOutlet]=\"subTotal\"\r\n          [ngTemplateOutletContext]=\"\r\n            getMetaDataRow(rowData, index, reportMetaDataColumns)\r\n          \"\r\n        ></ng-container>\r\n      </ng-container>\r\n    </tbody>\r\n    <tbody>\r\n      <tr class=\"table-row\" *ngIf=\"!reportData.length\">\r\n        <td colSpan=\"{{ columns.length }}\" class=\"text-center\">\r\n          {{ emptyMessage }}\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<ng-template #tableRow let-rowData=\"rowData\" let-index=\"index\">\r\n  <tr class=\"table-row\">\r\n    <td\r\n      class=\"text-wrap\"\r\n      *ngFor=\"let col of columns\"\r\n      [class.text-right]=\"col.type == 'number' || col.type == 'id'\"\r\n      [class.text-center]=\"col.type == 'checked'\"\r\n      [style.color]=\"getTextColor(rowData, col.TextColors)\"\r\n      style.backgroundColor=\"#{{\r\n        (rowData.SNo || index + 1) % 2 ? fillColor.odd : fillColor.even\r\n      }}\"\r\n    >\r\n      <ng-container [ngSwitch]=\"col.type\">\r\n        <ng-container\r\n          *ngSwitchCase=\"'url'\"\r\n          [ngTemplateOutlet]=\"urlField\"\r\n        ></ng-container>\r\n        <ng-container\r\n          *ngSwitchCase=\"'checked'\"\r\n          [ngTemplateOutlet]=\"checkedField\"\r\n        ></ng-container>\r\n        <ng-container\r\n          *ngSwitchCase=\"'number'\"\r\n          [ngTemplateOutlet]=\"numberField\"\r\n        ></ng-container>\r\n        <ng-container\r\n          *ngSwitchDefault\r\n          [ngTemplateOutlet]=\"defaultField\"\r\n        ></ng-container>\r\n      </ng-container>\r\n\r\n      <ng-template #urlField>\r\n        <a [href]=\"rowData[col.field]\" target=\"_blank\">\r\n          {{ rowData[col.field] }}\r\n        </a>\r\n      </ng-template>\r\n\r\n      <ng-template #checkedField>\r\n        <ng-container *ngIf=\"rowData[col.field]\">\r\n          <i class=\"fa fa-solid fa-check\"></i>\r\n        </ng-container>\r\n        <ng-container\r\n          *ngIf=\"!rowData[col.field]\"\r\n          style=\"font-weight: 1200; font-size: xx-large\"\r\n          >-</ng-container\r\n        >\r\n      </ng-template>\r\n\r\n      <ng-template #numberField>\r\n        <span [style.color]=\"rowData[col.field] ? '' : 'transparent'\">\r\n          {{ rowData[col.field] || 0 }}\r\n        </span>\r\n      </ng-template>\r\n\r\n      <ng-template #defaultField>{{ rowData[col.field] }}</ng-template>\r\n    </td>\r\n  </tr>\r\n</ng-template>\r\n\r\n<ng-template\r\n  #rowGroup\r\n  let-rowData=\"rowData\"\r\n  let-index=\"index\"\r\n  let-metaColumns=\"metaColumns\"\r\n>\r\n  <ng-container *ngIf=\"metaColumns && metaColumns.field\">\r\n    <tr\r\n      [class]=\"metaColumns.classNames\"\r\n      *ngIf=\"showMetaDataRow(rowData, index, metaColumns)\"\r\n    >\r\n      <td colSpan=\"{{ columns.length }}\" class=\"text-center\">\r\n        {{ metaColumns.header }}\r\n        {{ rowData[metaColumns.field] }}\r\n      </td>\r\n    </tr>\r\n    <ng-container\r\n      [ngTemplateOutlet]=\"rowGroup\"\r\n      [ngTemplateOutletContext]=\"\r\n        getMetaDataRow(rowData, index, metaColumns.columns)\r\n      \"\r\n    ></ng-container>\r\n  </ng-container>\r\n</ng-template>\r\n\r\n<ng-template\r\n  #subTotal\r\n  let-rowData=\"rowData\"\r\n  let-index=\"index\"\r\n  let-metaColumns=\"metaColumns\"\r\n>\r\n  <ng-container *ngIf=\"metaColumns\">\r\n    <tr\r\n      [class]=\"metaColumns.classNames\"\r\n      *ngIf=\"showMetaDataSubTotalRow(rowData, index, metaColumns)\"\r\n    >\r\n      <td\r\n        class=\"text-right\"\r\n        *ngFor=\"let col of columns\"\r\n        style.backgroundColor=\"#{{ fillColor.groupTotal }}\"\r\n      >\r\n        <span\r\n          *ngIf=\"showMetaDataSubTotalCol(col.field, metaColumns)\"\r\n          [style.color]=\"\r\n            getMetadataSubTotal(rowData, col.field, metaColumns)\r\n              ? ''\r\n              : 'transparent'\r\n          \"\r\n        >\r\n          {{ getMetadataSubTotal(rowData, col.field, metaColumns) }}\r\n        </span>\r\n      </td>\r\n    </tr>\r\n    <ng-container\r\n      [ngTemplateOutlet]=\"subTotal\"\r\n      [ngTemplateOutletContext]=\"\r\n        getMetaDataRow(rowData, index, metaColumns.columns)\r\n      \"\r\n    ></ng-container>\r\n  </ng-container>\r\n</ng-template>\r\n", dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i1.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { kind: "directive", type: i1.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { kind: "directive", type: i1.NgSwitchDefault, selector: "[ngSwitchDefault]" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.1", ngImport: i0, type: ReportTableComponent, decorators: [{
            type: Component,
            args: [{ selector: "lib-report-table", template: "<div\r\n  class=\"{{ isResponsive ? 'table-responsive-sm table-responsive' : '' }}\"\r\n  style=\"width: 100%; overflow: auto\"\r\n  style.maxHeight=\"calc(100vh - {{ devidHeight + 8 }}px)\"\r\n>\r\n  <table\r\n    class=\"table table-bordered text-nowrap\"\r\n    id=\"exportTable\"\r\n    style=\"width: max-content\"\r\n  >\r\n    <thead>\r\n      <tr>\r\n        <th\r\n          *ngFor=\"let col of columns\"\r\n          [style.width]=\"getColumnWidth(col.width)\"\r\n          class=\"position-sticky\"\r\n        >\r\n          <b>{{ col.header }}</b>\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <ng-container *ngFor=\"let rowData of reportData; let index = index\">\r\n        <ng-container\r\n          [ngTemplateOutlet]=\"rowGroup\"\r\n          [ngTemplateOutletContext]=\"\r\n            getMetaDataRow(rowData, index, reportMetaDataColumns)\r\n          \"\r\n        ></ng-container>\r\n        <ng-container\r\n          [ngTemplateOutlet]=\"tableRow\"\r\n          [ngTemplateOutletContext]=\"\r\n            getMetaDataRow(rowData, index, reportMetaDataColumns)\r\n          \"\r\n        ></ng-container>\r\n        <ng-container\r\n          [ngTemplateOutlet]=\"subTotal\"\r\n          [ngTemplateOutletContext]=\"\r\n            getMetaDataRow(rowData, index, reportMetaDataColumns)\r\n          \"\r\n        ></ng-container>\r\n      </ng-container>\r\n    </tbody>\r\n    <tbody>\r\n      <tr class=\"table-row\" *ngIf=\"!reportData.length\">\r\n        <td colSpan=\"{{ columns.length }}\" class=\"text-center\">\r\n          {{ emptyMessage }}\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<ng-template #tableRow let-rowData=\"rowData\" let-index=\"index\">\r\n  <tr class=\"table-row\">\r\n    <td\r\n      class=\"text-wrap\"\r\n      *ngFor=\"let col of columns\"\r\n      [class.text-right]=\"col.type == 'number' || col.type == 'id'\"\r\n      [class.text-center]=\"col.type == 'checked'\"\r\n      [style.color]=\"getTextColor(rowData, col.TextColors)\"\r\n      style.backgroundColor=\"#{{\r\n        (rowData.SNo || index + 1) % 2 ? fillColor.odd : fillColor.even\r\n      }}\"\r\n    >\r\n      <ng-container [ngSwitch]=\"col.type\">\r\n        <ng-container\r\n          *ngSwitchCase=\"'url'\"\r\n          [ngTemplateOutlet]=\"urlField\"\r\n        ></ng-container>\r\n        <ng-container\r\n          *ngSwitchCase=\"'checked'\"\r\n          [ngTemplateOutlet]=\"checkedField\"\r\n        ></ng-container>\r\n        <ng-container\r\n          *ngSwitchCase=\"'number'\"\r\n          [ngTemplateOutlet]=\"numberField\"\r\n        ></ng-container>\r\n        <ng-container\r\n          *ngSwitchDefault\r\n          [ngTemplateOutlet]=\"defaultField\"\r\n        ></ng-container>\r\n      </ng-container>\r\n\r\n      <ng-template #urlField>\r\n        <a [href]=\"rowData[col.field]\" target=\"_blank\">\r\n          {{ rowData[col.field] }}\r\n        </a>\r\n      </ng-template>\r\n\r\n      <ng-template #checkedField>\r\n        <ng-container *ngIf=\"rowData[col.field]\">\r\n          <i class=\"fa fa-solid fa-check\"></i>\r\n        </ng-container>\r\n        <ng-container\r\n          *ngIf=\"!rowData[col.field]\"\r\n          style=\"font-weight: 1200; font-size: xx-large\"\r\n          >-</ng-container\r\n        >\r\n      </ng-template>\r\n\r\n      <ng-template #numberField>\r\n        <span [style.color]=\"rowData[col.field] ? '' : 'transparent'\">\r\n          {{ rowData[col.field] || 0 }}\r\n        </span>\r\n      </ng-template>\r\n\r\n      <ng-template #defaultField>{{ rowData[col.field] }}</ng-template>\r\n    </td>\r\n  </tr>\r\n</ng-template>\r\n\r\n<ng-template\r\n  #rowGroup\r\n  let-rowData=\"rowData\"\r\n  let-index=\"index\"\r\n  let-metaColumns=\"metaColumns\"\r\n>\r\n  <ng-container *ngIf=\"metaColumns && metaColumns.field\">\r\n    <tr\r\n      [class]=\"metaColumns.classNames\"\r\n      *ngIf=\"showMetaDataRow(rowData, index, metaColumns)\"\r\n    >\r\n      <td colSpan=\"{{ columns.length }}\" class=\"text-center\">\r\n        {{ metaColumns.header }}\r\n        {{ rowData[metaColumns.field] }}\r\n      </td>\r\n    </tr>\r\n    <ng-container\r\n      [ngTemplateOutlet]=\"rowGroup\"\r\n      [ngTemplateOutletContext]=\"\r\n        getMetaDataRow(rowData, index, metaColumns.columns)\r\n      \"\r\n    ></ng-container>\r\n  </ng-container>\r\n</ng-template>\r\n\r\n<ng-template\r\n  #subTotal\r\n  let-rowData=\"rowData\"\r\n  let-index=\"index\"\r\n  let-metaColumns=\"metaColumns\"\r\n>\r\n  <ng-container *ngIf=\"metaColumns\">\r\n    <tr\r\n      [class]=\"metaColumns.classNames\"\r\n      *ngIf=\"showMetaDataSubTotalRow(rowData, index, metaColumns)\"\r\n    >\r\n      <td\r\n        class=\"text-right\"\r\n        *ngFor=\"let col of columns\"\r\n        style.backgroundColor=\"#{{ fillColor.groupTotal }}\"\r\n      >\r\n        <span\r\n          *ngIf=\"showMetaDataSubTotalCol(col.field, metaColumns)\"\r\n          [style.color]=\"\r\n            getMetadataSubTotal(rowData, col.field, metaColumns)\r\n              ? ''\r\n              : 'transparent'\r\n          \"\r\n        >\r\n          {{ getMetadataSubTotal(rowData, col.field, metaColumns) }}\r\n        </span>\r\n      </td>\r\n    </tr>\r\n    <ng-container\r\n      [ngTemplateOutlet]=\"subTotal\"\r\n      [ngTemplateOutletContext]=\"\r\n        getMetaDataRow(rowData, index, metaColumns.columns)\r\n      \"\r\n    ></ng-container>\r\n  </ng-container>\r\n</ng-template>\r\n" }]
        }], ctorParameters: function () { return []; }, propDecorators: { reportMetaData: [{
                type: Input
            }], devidHeight: [{
                type: Input
            }], columns: [{
                type: Input
            }], reportData: [{
                type: Input
            }], reportMetaDataColumns: [{
                type: Input
            }], emptyMessage: [{
                type: Input
            }], fillColor: [{
                type: Input
            }], isResponsive: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVwb3J0LXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3JlcG9ydC10b29sL21vZHVsZXMvcmVwb3J0LXRhYmxlL3JlcG9ydC10YWJsZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9yZXBvcnQtdG9vbC9tb2R1bGVzL3JlcG9ydC10YWJsZS9yZXBvcnQtdGFibGUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDakQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGtCQUFrQixDQUFDOzs7QUFFN0MsbUVBQW1FO0FBTW5FLE1BQU0sT0FBTyxvQkFBb0I7SUFVL0I7UUFUZ0IsbUJBQWMsR0FBUSxFQUFFLENBQUM7UUFDekIsZ0JBQVcsR0FBRyxDQUFDLENBQUM7UUFDaEIsWUFBTyxHQUFVLEVBQUUsQ0FBQztRQUNwQixlQUFVLEdBQVUsRUFBRSxDQUFDO1FBRXZCLGlCQUFZLEdBQUcsRUFBRSxDQUFDO1FBQ2xCLGNBQVMsR0FBRyxTQUFTLENBQUM7UUFDdEIsaUJBQVksR0FBRyxJQUFJLENBQUM7UUFHbEMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFTSxjQUFjLENBQUMsS0FBVTtRQUM5QixPQUFPLE9BQU8sS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDO0lBQzFELENBQUM7SUFFTSxjQUFjLENBQUMsT0FBWSxFQUFFLEtBQWEsRUFBRSxXQUFnQjtRQUNqRSxPQUFPO1lBQ0wsT0FBTztZQUNQLEtBQUs7WUFDTCxXQUFXO1NBQ1osQ0FBQztJQUNKLENBQUM7SUFFTSxlQUFlLENBQ3BCLE9BQVksRUFDWixLQUFhLEVBQ2IsV0FBZ0I7UUFF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O3NCQUF4QixLQUFLO2dCQUNVLFlBQVk7c0JBQTNCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgZmlsbENvbG9yIH0gZnJvbSBcInJlcG9ydC10b29sL2NvcmVcIjtcclxuXHJcbi8vIGNvbnN0IGNsYXNzTmFtZXMgPSBbXCJ0YWJsZS1yb3dcIiwgXCJyb3ctZ3JvdXBcIiwgXCJyb3ctY2hpbGRncm91cFwiXTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiBcImxpYi1yZXBvcnQtdGFibGVcIixcclxuICB0ZW1wbGF0ZVVybDogXCIuL3JlcG9ydC10YWJsZS5jb21wb25lbnQuaHRtbFwiXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBSZXBvcnRUYWJsZUNvbXBvbmVudCB7XHJcbiAgQElucHV0KCkgcHVibGljIHJlcG9ydE1ldGFEYXRhOiBhbnkgPSB7fTtcclxuICBASW5wdXQoKSBwdWJsaWMgZGV2aWRIZWlnaHQgPSAwO1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBjb2x1bW5zOiBhbnlbXSA9IFtdO1xyXG4gIEBJbnB1dCgpIHB1YmxpYyByZXBvcnREYXRhOiBhbnlbXSA9IFtdO1xyXG4gIEBJbnB1dCgpIHB1YmxpYyByZXBvcnRNZXRhRGF0YUNvbHVtbnM6IGFueTtcclxuICBASW5wdXQoKSBwdWJsaWMgZW1wdHlNZXNzYWdlID0gXCJcIjtcclxuICBASW5wdXQoKSBwdWJsaWMgZmlsbENvbG9yID0gZmlsbENvbG9yO1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBpc1Jlc3BvbnNpdmUgPSB0cnVlO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuc2V0RGV2aWRIZWlnaHQoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRDb2x1bW5XaWR0aCh3aWR0aDogYW55KTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0eXBlb2Ygd2lkdGggPT09IFwic3RyaW5nXCIgPyB3aWR0aCA6IGAke3dpZHRofXB4YDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRNZXRhRGF0YVJvdyhyb3dEYXRhOiBhbnksIGluZGV4OiBudW1iZXIsIG1ldGFDb2x1bW5zOiBhbnkpOiBhbnkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcm93RGF0YSxcclxuICAgICAgaW5kZXgsXHJcbiAgICAgIG1ldGFDb2x1bW5zLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzaG93TWV0YURhdGFSb3coXHJcbiAgICByb3dEYXRhOiBhbnksXHJcbiAgICBpbmRleDogbnVtYmVyLFxyXG4gICAgbWV0YUNvbHVtbnM6IGFueVxyXG4gICk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKG1ldGFDb2x1bW5zKSB7XHJcbiAgICAgIGNvbnN0IGZpZWxkcyA9IChtZXRhQ29sdW1ucy5maWVsZHMgfHwgW10pIGFzIHN0cmluZ1tdO1xyXG4gICAgICBjb25zdCBtZXRhRGF0YSA9IGZpZWxkcy5yZWR1Y2UoKGluaXQsIGN1cnJlbnQpID0+IHtcclxuICAgICAgICBpZiAoaW5pdC5jb2x1bW5zKSB7XHJcbiAgICAgICAgICBpbml0ID0gaW5pdC5jb2x1bW5zW3Jvd0RhdGFbY3VycmVudF1dIHx8IHt9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbml0ID0gdGhpcy5yZXBvcnRNZXRhRGF0YVtyb3dEYXRhW2N1cnJlbnRdXSB8fCB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluaXQ7XHJcbiAgICAgIH0sIHt9IGFzIGFueSk7XHJcbiAgICAgIHJldHVybiBtZXRhRGF0YS5pbmRleCA9PT0gaW5kZXg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2hvd01ldGFEYXRhU3ViVG90YWxSb3coXHJcbiAgICByb3dEYXRhOiBhbnksXHJcbiAgICBpbmRleDogbnVtYmVyLFxyXG4gICAgbWV0YUNvbHVtbnM6IGFueVxyXG4gICk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKG1ldGFDb2x1bW5zKSB7XHJcbiAgICAgIGNvbnN0IGZpZWxkcyA9IChtZXRhQ29sdW1ucy5maWVsZHMgfHwgW10pIGFzIHN0cmluZ1tdO1xyXG4gICAgICBjb25zdCBtZXRhRGF0YSA9IGZpZWxkcy5yZWR1Y2UoKGluaXQsIGN1cnJlbnQsIGkpID0+IHtcclxuICAgICAgICBpZiAoaW5pdC5jb2x1bW5zKSB7XHJcbiAgICAgICAgICBpbml0ID0gaW5pdC5jb2x1bW5zW3Jvd0RhdGFbY3VycmVudF1dIHx8IHt9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbml0ID0gdGhpcy5yZXBvcnRNZXRhRGF0YVtyb3dEYXRhW2N1cnJlbnRdXSB8fCB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluaXQ7XHJcbiAgICAgIH0sIHt9IGFzIGFueSk7XHJcbiAgICAgIHJldHVybiAobWV0YURhdGEuc3ViVG90YWwgfHwge30pLmluZGV4ID09PSBpbmRleDtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzaG93TWV0YURhdGFTdWJUb3RhbENvbChjb2x1bW46IHN0cmluZywgbWV0YUNvbHVtbnM6IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3Qgc3ViRmllbGRzID0gbWV0YUNvbHVtbnMgPyBtZXRhQ29sdW1ucy5zdWJUb3RhbCB8fCBbXSA6IFtdO1xyXG4gICAgcmV0dXJuIHN1YkZpZWxkcy5pbmNsdWRlcyhjb2x1bW4pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldE1ldGFkYXRhU3ViVG90YWwoXHJcbiAgICByb3dEYXRhOiBhbnksXHJcbiAgICBjb2x1bW46IHN0cmluZyxcclxuICAgIG1ldGFDb2x1bW5zOiBhbnlcclxuICApOiBudW1iZXIge1xyXG4gICAgaWYgKHRoaXMuc2hvd01ldGFEYXRhU3ViVG90YWxDb2woY29sdW1uLCBtZXRhQ29sdW1ucykpIHtcclxuICAgICAgY29uc3QgZmllbGRzID0gKG1ldGFDb2x1bW5zLmZpZWxkcyB8fCBbXSkgYXMgc3RyaW5nW107XHJcbiAgICAgIGNvbnN0IG1ldGFEYXRhID0gZmllbGRzLnJlZHVjZSgoaW5pdCwgY3VycmVudCwgaSkgPT4ge1xyXG4gICAgICAgIGlmIChpbml0LmNvbHVtbnMpIHtcclxuICAgICAgICAgIGluaXQgPSBpbml0LmNvbHVtbnNbcm93RGF0YVtjdXJyZW50XV0gfHwge307XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGluaXQgPSB0aGlzLnJlcG9ydE1ldGFEYXRhW3Jvd0RhdGFbY3VycmVudF1dIHx8IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5pdDtcclxuICAgICAgfSwge30gYXMgYW55KTtcclxuICAgICAgcmV0dXJuIChtZXRhRGF0YS5zdWJUb3RhbCB8fCB7fSlbY29sdW1uXSB8fCAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0VGV4dENvbG9yKHJvd0RhdGE6IGFueSwgdGV4dENvbG9yczogYW55KTogc3RyaW5nIHtcclxuICAgIGlmICh0ZXh0Q29sb3JzKSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSB0ZXh0Q29sb3JzLmNvbG9ycy5maW5kKFxyXG4gICAgICAgIChmKSA9PiBmLkZpZWxkSUQgPT09IHJvd0RhdGFbdGV4dENvbG9ycy5maWVsZF1cclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIGRhdGEgPyBkYXRhLkZpZWxkRGVzYyA6IFwiXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0RGV2aWRIZWlnaHQoY291bnQgPSAwKTogdm9pZCB7XHJcbiAgICBjb25zdCBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleHBvcnRUYWJsZVwiKTtcclxuICAgIGlmIChlbGVtICYmIHRoaXMuZGV2aWRIZWlnaHQpIHtcclxuICAgICAgdGhpcy5kZXZpZEhlaWdodCA9IChlbGVtIGFzIGFueSkub2Zmc2V0VG9wO1xyXG4gICAgfSBlbHNlIGlmIChjb3VudCA8IDEwKSB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0RGV2aWRIZWlnaHQoY291bnQgKyAxKTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIjxkaXZcclxuICBjbGFzcz1cInt7IGlzUmVzcG9uc2l2ZSA/ICd0YWJsZS1yZXNwb25zaXZlLXNtIHRhYmxlLXJlc3BvbnNpdmUnIDogJycgfX1cIlxyXG4gIHN0eWxlPVwid2lkdGg6IDEwMCU7IG92ZXJmbG93OiBhdXRvXCJcclxuICBzdHlsZS5tYXhIZWlnaHQ9XCJjYWxjKDEwMHZoIC0ge3sgZGV2aWRIZWlnaHQgKyA4IH19cHgpXCJcclxuPlxyXG4gIDx0YWJsZVxyXG4gICAgY2xhc3M9XCJ0YWJsZSB0YWJsZS1ib3JkZXJlZCB0ZXh0LW5vd3JhcFwiXHJcbiAgICBpZD1cImV4cG9ydFRhYmxlXCJcclxuICAgIHN0eWxlPVwid2lkdGg6IG1heC1jb250ZW50XCJcclxuICA+XHJcbiAgICA8dGhlYWQ+XHJcbiAgICAgIDx0cj5cclxuICAgICAgICA8dGhcclxuICAgICAgICAgICpuZ0Zvcj1cImxldCBjb2wgb2YgY29sdW1uc1wiXHJcbiAgICAgICAgICBbc3R5bGUud2lkdGhdPVwiZ2V0Q29sdW1uV2lkdGgoY29sLndpZHRoKVwiXHJcbiAgICAgICAgICBjbGFzcz1cInBvc2l0aW9uLXN0aWNreVwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPGI+e3sgY29sLmhlYWRlciB9fTwvYj5cclxuICAgICAgICA8L3RoPlxyXG4gICAgICA8L3RyPlxyXG4gICAgPC90aGVhZD5cclxuICAgIDx0Ym9keT5cclxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgcm93RGF0YSBvZiByZXBvcnREYXRhOyBsZXQgaW5kZXggPSBpbmRleFwiPlxyXG4gICAgICAgIDxuZy1jb250YWluZXJcclxuICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInJvd0dyb3VwXCJcclxuICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJcclxuICAgICAgICAgICAgZ2V0TWV0YURhdGFSb3cocm93RGF0YSwgaW5kZXgsIHJlcG9ydE1ldGFEYXRhQ29sdW1ucylcclxuICAgICAgICAgIFwiXHJcbiAgICAgICAgPjwvbmctY29udGFpbmVyPlxyXG4gICAgICAgIDxuZy1jb250YWluZXJcclxuICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInRhYmxlUm93XCJcclxuICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJcclxuICAgICAgICAgICAgZ2V0TWV0YURhdGFSb3cocm93RGF0YSwgaW5kZXgsIHJlcG9ydE1ldGFEYXRhQ29sdW1ucylcclxuICAgICAgICAgIFwiXHJcbiAgICAgICAgPjwvbmctY29udGFpbmVyPlxyXG4gICAgICAgIDxuZy1jb250YWluZXJcclxuICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInN1YlRvdGFsXCJcclxuICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJcclxuICAgICAgICAgICAgZ2V0TWV0YURhdGFSb3cocm93RGF0YSwgaW5kZXgsIHJlcG9ydE1ldGFEYXRhQ29sdW1ucylcclxuICAgICAgICAgIFwiXHJcbiAgICAgICAgPjwvbmctY29udGFpbmVyPlxyXG4gICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgIDwvdGJvZHk+XHJcbiAgICA8dGJvZHk+XHJcbiAgICAgIDx0ciBjbGFzcz1cInRhYmxlLXJvd1wiICpuZ0lmPVwiIXJlcG9ydERhdGEubGVuZ3RoXCI+XHJcbiAgICAgICAgPHRkIGNvbFNwYW49XCJ7eyBjb2x1bW5zLmxlbmd0aCB9fVwiIGNsYXNzPVwidGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgIHt7IGVtcHR5TWVzc2FnZSB9fVxyXG4gICAgICAgIDwvdGQ+XHJcbiAgICAgIDwvdHI+XHJcbiAgICA8L3Rib2R5PlxyXG4gIDwvdGFibGU+XHJcbjwvZGl2PlxyXG5cclxuPG5nLXRlbXBsYXRlICN0YWJsZVJvdyBsZXQtcm93RGF0YT1cInJvd0RhdGFcIiBsZXQtaW5kZXg9XCJpbmRleFwiPlxyXG4gIDx0ciBjbGFzcz1cInRhYmxlLXJvd1wiPlxyXG4gICAgPHRkXHJcbiAgICAgIGNsYXNzPVwidGV4dC13cmFwXCJcclxuICAgICAgKm5nRm9yPVwibGV0IGNvbCBvZiBjb2x1bW5zXCJcclxuICAgICAgW2NsYXNzLnRleHQtcmlnaHRdPVwiY29sLnR5cGUgPT0gJ251bWJlcicgfHwgY29sLnR5cGUgPT0gJ2lkJ1wiXHJcbiAgICAgIFtjbGFzcy50ZXh0LWNlbnRlcl09XCJjb2wudHlwZSA9PSAnY2hlY2tlZCdcIlxyXG4gICAgICBbc3R5bGUuY29sb3JdPVwiZ2V0VGV4dENvbG9yKHJvd0RhdGEsIGNvbC5UZXh0Q29sb3JzKVwiXHJcbiAgICAgIHN0eWxlLmJhY2tncm91bmRDb2xvcj1cIiN7e1xyXG4gICAgICAgIChyb3dEYXRhLlNObyB8fCBpbmRleCArIDEpICUgMiA/IGZpbGxDb2xvci5vZGQgOiBmaWxsQ29sb3IuZXZlblxyXG4gICAgICB9fVwiXHJcbiAgICA+XHJcbiAgICAgIDxuZy1jb250YWluZXIgW25nU3dpdGNoXT1cImNvbC50eXBlXCI+XHJcbiAgICAgICAgPG5nLWNvbnRhaW5lclxyXG4gICAgICAgICAgKm5nU3dpdGNoQ2FzZT1cIid1cmwnXCJcclxuICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInVybEZpZWxkXCJcclxuICAgICAgICA+PC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgPG5nLWNvbnRhaW5lclxyXG4gICAgICAgICAgKm5nU3dpdGNoQ2FzZT1cIidjaGVja2VkJ1wiXHJcbiAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJjaGVja2VkRmllbGRcIlxyXG4gICAgICAgID48L25nLWNvbnRhaW5lcj5cclxuICAgICAgICA8bmctY29udGFpbmVyXHJcbiAgICAgICAgICAqbmdTd2l0Y2hDYXNlPVwiJ251bWJlcidcIlxyXG4gICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwibnVtYmVyRmllbGRcIlxyXG4gICAgICAgID48L25nLWNvbnRhaW5lcj5cclxuICAgICAgICA8bmctY29udGFpbmVyXHJcbiAgICAgICAgICAqbmdTd2l0Y2hEZWZhdWx0XHJcbiAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJkZWZhdWx0RmllbGRcIlxyXG4gICAgICAgID48L25nLWNvbnRhaW5lcj5cclxuICAgICAgPC9uZy1jb250YWluZXI+XHJcblxyXG4gICAgICA8bmctdGVtcGxhdGUgI3VybEZpZWxkPlxyXG4gICAgICAgIDxhIFtocmVmXT1cInJvd0RhdGFbY29sLmZpZWxkXVwiIHRhcmdldD1cIl9ibGFua1wiPlxyXG4gICAgICAgICAge3sgcm93RGF0YVtjb2wuZmllbGRdIH19XHJcbiAgICAgICAgPC9hPlxyXG4gICAgICA8L25nLXRlbXBsYXRlPlxyXG5cclxuICAgICAgPG5nLXRlbXBsYXRlICNjaGVja2VkRmllbGQ+XHJcbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInJvd0RhdGFbY29sLmZpZWxkXVwiPlxyXG4gICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1zb2xpZCBmYS1jaGVja1wiPjwvaT5cclxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICA8bmctY29udGFpbmVyXHJcbiAgICAgICAgICAqbmdJZj1cIiFyb3dEYXRhW2NvbC5maWVsZF1cIlxyXG4gICAgICAgICAgc3R5bGU9XCJmb250LXdlaWdodDogMTIwMDsgZm9udC1zaXplOiB4eC1sYXJnZVwiXHJcbiAgICAgICAgICA+LTwvbmctY29udGFpbmVyXHJcbiAgICAgICAgPlxyXG4gICAgICA8L25nLXRlbXBsYXRlPlxyXG5cclxuICAgICAgPG5nLXRlbXBsYXRlICNudW1iZXJGaWVsZD5cclxuICAgICAgICA8c3BhbiBbc3R5bGUuY29sb3JdPVwicm93RGF0YVtjb2wuZmllbGRdID8gJycgOiAndHJhbnNwYXJlbnQnXCI+XHJcbiAgICAgICAgICB7eyByb3dEYXRhW2NvbC5maWVsZF0gfHwgMCB9fVxyXG4gICAgICAgIDwvc3Bhbj5cclxuICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuXHJcbiAgICAgIDxuZy10ZW1wbGF0ZSAjZGVmYXVsdEZpZWxkPnt7IHJvd0RhdGFbY29sLmZpZWxkXSB9fTwvbmctdGVtcGxhdGU+XHJcbiAgICA8L3RkPlxyXG4gIDwvdHI+XHJcbjwvbmctdGVtcGxhdGU+XHJcblxyXG48bmctdGVtcGxhdGVcclxuICAjcm93R3JvdXBcclxuICBsZXQtcm93RGF0YT1cInJvd0RhdGFcIlxyXG4gIGxldC1pbmRleD1cImluZGV4XCJcclxuICBsZXQtbWV0YUNvbHVtbnM9XCJtZXRhQ29sdW1uc1wiXHJcbj5cclxuICA8bmctY29udGFpbmVyICpuZ0lmPVwibWV0YUNvbHVtbnMgJiYgbWV0YUNvbHVtbnMuZmllbGRcIj5cclxuICAgIDx0clxyXG4gICAgICBbY2xhc3NdPVwibWV0YUNvbHVtbnMuY2xhc3NOYW1lc1wiXHJcbiAgICAgICpuZ0lmPVwic2hvd01ldGFEYXRhUm93KHJvd0RhdGEsIGluZGV4LCBtZXRhQ29sdW1ucylcIlxyXG4gICAgPlxyXG4gICAgICA8dGQgY29sU3Bhbj1cInt7IGNvbHVtbnMubGVuZ3RoIH19XCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgIHt7IG1ldGFDb2x1bW5zLmhlYWRlciB9fVxyXG4gICAgICAgIHt7IHJvd0RhdGFbbWV0YUNvbHVtbnMuZmllbGRdIH19XHJcbiAgICAgIDwvdGQ+XHJcbiAgICA8L3RyPlxyXG4gICAgPG5nLWNvbnRhaW5lclxyXG4gICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJyb3dHcm91cFwiXHJcbiAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJcclxuICAgICAgICBnZXRNZXRhRGF0YVJvdyhyb3dEYXRhLCBpbmRleCwgbWV0YUNvbHVtbnMuY29sdW1ucylcclxuICAgICAgXCJcclxuICAgID48L25nLWNvbnRhaW5lcj5cclxuICA8L25nLWNvbnRhaW5lcj5cclxuPC9uZy10ZW1wbGF0ZT5cclxuXHJcbjxuZy10ZW1wbGF0ZVxyXG4gICNzdWJUb3RhbFxyXG4gIGxldC1yb3dEYXRhPVwicm93RGF0YVwiXHJcbiAgbGV0LWluZGV4PVwiaW5kZXhcIlxyXG4gIGxldC1tZXRhQ29sdW1ucz1cIm1ldGFDb2x1bW5zXCJcclxuPlxyXG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCJtZXRhQ29sdW1uc1wiPlxyXG4gICAgPHRyXHJcbiAgICAgIFtjbGFzc109XCJtZXRhQ29sdW1ucy5jbGFzc05hbWVzXCJcclxuICAgICAgKm5nSWY9XCJzaG93TWV0YURhdGFTdWJUb3RhbFJvdyhyb3dEYXRhLCBpbmRleCwgbWV0YUNvbHVtbnMpXCJcclxuICAgID5cclxuICAgICAgPHRkXHJcbiAgICAgICAgY2xhc3M9XCJ0ZXh0LXJpZ2h0XCJcclxuICAgICAgICAqbmdGb3I9XCJsZXQgY29sIG9mIGNvbHVtbnNcIlxyXG4gICAgICAgIHN0eWxlLmJhY2tncm91bmRDb2xvcj1cIiN7eyBmaWxsQ29sb3IuZ3JvdXBUb3RhbCB9fVwiXHJcbiAgICAgID5cclxuICAgICAgICA8c3BhblxyXG4gICAgICAgICAgKm5nSWY9XCJzaG93TWV0YURhdGFTdWJUb3RhbENvbChjb2wuZmllbGQsIG1ldGFDb2x1bW5zKVwiXHJcbiAgICAgICAgICBbc3R5bGUuY29sb3JdPVwiXHJcbiAgICAgICAgICAgIGdldE1ldGFkYXRhU3ViVG90YWwocm93RGF0YSwgY29sLmZpZWxkLCBtZXRhQ29sdW1ucylcclxuICAgICAgICAgICAgICA/ICcnXHJcbiAgICAgICAgICAgICAgOiAndHJhbnNwYXJlbnQnXHJcbiAgICAgICAgICBcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIHt7IGdldE1ldGFkYXRhU3ViVG90YWwocm93RGF0YSwgY29sLmZpZWxkLCBtZXRhQ29sdW1ucykgfX1cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICAgIDwvdGQ+XHJcbiAgICA8L3RyPlxyXG4gICAgPG5nLWNvbnRhaW5lclxyXG4gICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJzdWJUb3RhbFwiXHJcbiAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJcclxuICAgICAgICBnZXRNZXRhRGF0YVJvdyhyb3dEYXRhLCBpbmRleCwgbWV0YUNvbHVtbnMuY29sdW1ucylcclxuICAgICAgXCJcclxuICAgID48L25nLWNvbnRhaW5lcj5cclxuICA8L25nLWNvbnRhaW5lcj5cclxuPC9uZy10ZW1wbGF0ZT5cclxuIl19